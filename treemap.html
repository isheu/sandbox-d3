<html>
   <head>
      <script type="text/javascript" src="d3.v2.js"></script>
   </head>
   <body>
      <div id="body">
      <div id="footer">
      </div>
      </div>
      <script type="text/javascript">
         var treedata = {
            "name":"master",
            "children": [
               {"name": "test1", "size":16},
               {"name": "test2", "size":25},
               {"name": "test3", "size":8},
               {"name": "test4", "size":9},
               {"name": "test5", "size":36},
               {"name": "test6", "size":30},
               {"name": "test7", "size":25},
               {"name": "test8", "size":16},
               {"name": "test9", "size":16},
               {"name": "test10", "size":50},
               {"name": "test11", "size":25},
               {"name": "test12", "size":24},
               {"name": "test13", "size":10},
               {"name": "test14", "size":16},
               {"name": "test15", "size":15},
               {"name": "test16", "size":32},
               {"name": "test17", "size":24},
               {"name": "test18", "size":4},
               {"name": "test19", "size":4},
               {"name": "test20", "size":9},
               {"name": "test21", "size":8}
               ]
            }
         var treedata_2 = {
            "name":"master",
            "children": [
               {"name": "test1", "size":4},
               {"name": "test2", "size":4},
               {"name": "test3", "size":8},
               {"name": "test4", "size":9},
               {"name": "test5", "size":6},
               {"name": "test6", "size":25},
               {"name": "test7", "size":9},
               {"name": "test8", "size":75},
               {"name": "test9", "size":30},
               {"name": "test10", "size":4},
               {"name": "test11", "size":20},
               {"name": "test12", "size":24},
               {"name": "test13", "size":8},
               {"name": "test14", "size":4},
               {"name": "test15", "size":7},
               {"name": "test16", "size":48},
               {"name": "test17", "size":30},
               {"name": "test18", "size":8},
               {"name": "test19", "size":10},
               {"name": "test20", "size":9},
               {"name": "test21", "size":8},
               {"name": "test1", "size":16},
               {"name": "test2", "size":25},
               {"name": "test3", "size":8},
               {"name": "test4", "size":9},
               {"name": "test5", "size":36},
               {"name": "test6", "size":30},
               {"name": "test7", "size":25},
               {"name": "test8", "size":16},
               {"name": "test9", "size":16},
               {"name": "test10", "size":50},
               {"name": "test11", "size":25},
               {"name": "test12", "size":24},
               {"name": "test13", "size":10},
               {"name": "test14", "size":16},
               {"name": "test15", "size":15},
               {"name": "test16", "size":32},
               {"name": "test17", "size":24},
               {"name": "test18", "size":4},
               {"name": "test19", "size":4},
               {"name": "test20", "size":9},
               {"name": "test21", "size":8}               
               ]
            }

         var tmap = d3.layout.treemap()
            .size([25,400])
            .value(function(d) { return d.size; });

         svg = d3.select("#body").append("svg:svg")
            .attr("width",800)
            .attr("height",600)

         svg.selectAll("rect.mapnode")
            .data(tmap.nodes(treedata_2))
            .enter().append("rect")
            .attr("fill", "white")
            .attr("stroke", "white")
            .attr("x", function(d) { return d.x + "px" })
            .attr("y", function(d) { return d.y + "px" })
            .attr("width", function(d) { return d.dx + "px" })
            .attr("height", function(d) { return d.dy + "px" });


         svg.selectAll("circle.mapnodecenter")
            .data(tmap.nodes(treedata_2))
            .enter().append("circle")
            .attr("class", "mapnodecenter")
            .attr("fill", "grey")
            .attr("stroke-width", 0)
            .attr("cx", function(d) { return d.x + (d.dx / 2) + "px" })
            .attr("cy", function(d) { return d.y + (d.dy / 2) + "px" })
            //.attr("r", 1);
            .attr("r", function(d) { return d.name == "master" ? 1 : (Math.sqrt(d.dx * d.dy) / 2) - 2; });


      </script>
   </body>
</html>
